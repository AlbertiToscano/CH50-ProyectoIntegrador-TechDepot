import"./footer-DaZsVk3c.js";document.addEventListener("DOMContentLoaded",function(){const n=document.getElementById("formulario"),l=document.querySelectorAll("#formulario input"),r={nombre:!1,apellido:!1,correo:!1,contraseña:!1},o={nombre:/^[a-zA-ZÀ-ÿ\s]{1,40}$/,contraseña:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[$@$!%*?&#.$(\)-_/+\.,:;'"!&^~|`])[A-Za-z\d$@$!%*?&#.$(\)-_/+\.,:;'"!&^~|`]{8,16}$/,correo:/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/,apellido:/^[a-zA-ZÀ-ÿ\s]{1,40}$/},a=e=>{switch(e.target.name){case"nombre":c(o.nombre,e.target,"nombre");break;case"apellido":c(o.apellido,e.target,"apellido");break;case"correo":c(o.correo,e.target,"correo");break;case"contraseña":c(o.contraseña,e.target,"contraseña"),d();break;case"ConfirmaContraseña":d();break}},c=(e,s,t)=>{e.test(s.value)?(document.querySelector(`#error-${t}`).classList.remove("error-activo"),r[t]=!0):(document.querySelector(`#error-${t}`).classList.add("error-activo"),r[t]=!1)},d=()=>{const e=document.getElementById("contraseña"),s=document.getElementById("ConfirmaContraseña");e.value!==s.value?(document.querySelector("#error-coincide").classList.add("error-activo"),r.contraseña=!1):(document.querySelector("#error-coincide").classList.remove("error-activo"),r.contraseña=!0),o.contraseña.test(e.value)?document.querySelector("#error-contraseña").classList.remove("error-activo"):(document.querySelector("#error-contraseña").classList.add("error-activo"),r.contraseña=!1)};l.forEach(e=>{e.addEventListener("keyup",a),e.addEventListener("blur",a)});const u=()=>r.nombre&&r.apellido&&r.correo&&r.contraseña;n.addEventListener("submit",e=>{e.preventDefault();const s=document.getElementById("terminos");if(u()&&s.checked){const t=new FormData(e.target),i=Object.fromEntries(t.entries()),m={firstName:i.nombre,lastName:i.apellido,email:i.correo,password:i.contraseña,role:{id:2}};console.log(m),v(m),document.getElementById("registro-exitoso").classList.add("registro-exitoso-activo"),n.reset(),window.location.href="/src/pages/inicioSesion/inicioSesion.html"}else document.getElementById("error-registro").classList.add("error-registro-activo");setTimeout(()=>{document.getElementById("registro-exitoso").classList.remove("registro-exitoso-activo"),document.getElementById("error-registro").classList.remove("error-registro-activo")},3e3)})});const v=async n=>{const l="http://54.193.93.101:8080/api/v1/users",r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};try{const o=await fetch(l,r);if(!o.ok)throw new Error(`Error ${o.status}: ${await o.text()}`);const a=await o.json();return console.log("Respuesta del servidor:",a),a}catch(o){throw console.warn("Error en la solicitud:",o),o}};
